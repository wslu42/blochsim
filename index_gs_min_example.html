<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>GlowScript (JS API) Animation</title>

  <!-- CSS -->
  <link rel="stylesheet" href="https://www.glowscript.org/css/redmond/2.1/jquery-ui.custom.css">
  <link rel="stylesheet" href="https://www.glowscript.org/css/ide.css">

  <!-- jQuery + jQuery UI（與 GlowScript 3.2 相容） -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>

  <!-- 只需要 glow（JS API 寫法不需 RSrun） -->
  <script src="https://www.glowscript.org/package/glow.3.2.min.js"></script>

  <script>alert('PING 6.0');</script>

  <style>
    #gsbox { border: 8px dashed #999; padding: 8px; }
  </style>
</head>
<body>
  <div id="gsbox" class="glowscript"></div>

  <script>
    $(function () {
      // 把畫布綁到容器
      window.__context = { glowscript_container: $("#gsbox") };

      // 畫布與物件
      var scene = canvas({ title: "JS API Animation", width: 640, height: 360, background: color.white });
      var ring0 = ring({ pos: vec(0,0,0), axis: vec(0,0,1), radius: 2.0, thickness: 0.02, color: vec(0.8,0.8,0.8) });
      var ball  = sphere({ pos: vec(2,0,0), radius: 0.3, color: color.cyan, opacity: 0.9 });

      print("✅ JS API animation started");
      scene.append_to_caption("\\n[tip] click canvas to pause/resume\\n");

      // 簡單動畫：讓球沿半徑=2 的圓運動
      var t = 0, running = true;
      function loop() {
        if (running) {
          t += 0.02;  // 調整速度
          ball.pos = vec( 2*Math.cos(t), 2*Math.sin(t), 0 );
        }
        requestAnimationFrame(loop);
      }
      loop();

      // 點擊畫布可暫停/繼續
      scene.bind("click", function () { running = !running; });
    });
  </script>
</body>
</html>
